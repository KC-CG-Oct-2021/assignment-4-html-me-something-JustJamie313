<!DOCTYPE html>
<html lang='en'>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=0.5">
      <title>KC CoderGirl Original Art</title>
      <link rel='stylesheet' type='text/css' href='styles.css'/>
      <link rel='icon' type='image/x-icon' href='images/kccodergirl3.png'/>
      <script src='./gallery.js'></script>
   </head>
   <body>
      <h1 id="mainHeading"><img id='kccg' src='images/kccodergirl3.png' alt='KC Codergirl logo'>Original Art Gallery</h1>
      
      <div class='container'>
         <button id='decrease' onmousedown='this.classList.add("clicked");' onmouseup='this.classList.remove("clicked");' onclick='(galleryIndex===0)?galleryIndex=gallery.length-1:galleryIndex -= 1;showImage(galleryIndex);'>&lt;</button>
         <main>
            <img id='light' src='images/galleryLight.png' alt='image of gallery light fixture'/>
            <span id='chain' onclick='toggleLight();' onmousedown='growChain();' onmouseup='returnChain();' onmouseout='returnChain();'></span>
            <article>
               <header>
                  <img id='galleryImage'/>
                  <p id="testP" class='nameplate'>
                     <span id='artworkTitle' class='nameplateText' title=''></span>
                     <span id='artworkArtist' class='nameplateText' title=''></span>
                  </p>
                  <p class='funParagraph'></p>
               </header>
               <pre></pre>
            </article>
         </main>
         <button  id='increase' onmousedown='this.classList.add("clicked");' onmouseup='this.classList.remove("clicked");' onclick='(galleryIndex === gallery.length-1)?galleryIndex=0:galleryIndex+=1;showImage(galleryIndex)'>&gt;</button>
      </div>
      <img id='viewFinder' src='./images/viewfinder.png' alt='image of viewfinder toy' onclick='window.location=`./pages/viewFinder.html?index=${galleryIndex}`'/>
      <footer>
         <p>Version: 1.12</p>
         &copy; <script>document.write(new Date().getFullYear())</script> <b>&#183;</b> Jamie Miller ~ All Rights Reserved.
         <p>All images and poetry are my original works.  All Rights Reserved.</p>
      </footer>
      <script>
         
         let galleryIndex = Math.floor(Math.random()*gallery.length);
         setInterval(function(){randomizeBackground();},15000);
         showImage(galleryIndex);
         function showImage(index){
            let image = document.querySelector('#galleryImage');
            let title = document.querySelector('#artworkTitle');
            let artist = document.querySelector('#artworkArtist');
            let details = document.querySelector('.funParagraph');
            let preText = document.querySelector('pre');
            title.innerHTML = `"${gallery[index].name}"`;
            title.setAttribute('title',title.innerHTML);
            image.setAttribute('class',gallery[index].class);
            image.setAttribute('src',`./images/${gallery[index].src}`);
            image.setAttribute('alt',gallery[index].alt);
            artist.innerHTML = `${gallery[index].artist}`;
            artist.setAttribute('title',artist.innerHTML);
            details.innerHTML = gallery[index].details;
            if(gallery[index].pre !== ''){
               preText.innerHTML = gallery[index].pre;
               preText.style.display = 'block';
            } else {
               preText.innerHTML = '';
               preText.style.display = 'none';
            }
         }
         function randomizeBackground(){
            let body = document.querySelector('body');
            body.style.backgroundColor = `rgba(${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},0.25)`;
         }
         function toggleLight(){
            let light = document.querySelector('#light');
            if(light.src.includes('galleryLight')){
               light.src = 'images/galleryNoLight.png';
            } else {
               light.src = 'images/galleryLight.png';
            }
         }
         function growChain(){
            let chain = document.querySelector('#chain');
            chain.style.height = '180px';
         }
         function returnChain(){
            let chain = document.querySelector('#chain');
            chain.style.height = '150px';
         }
      </script>
   </body>
</html>